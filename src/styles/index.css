*,
*::before,
*::after {
	box-sizing: border-box;
}

* {
	margin: 0;
	padding: 0;
	font: inherit;
}

img,
picture,
svg,
video {
	display: block;
	max-width: 100%;
}

html {
	color-scheme: dark light;
	scrollbar-width: thin;
	scrollbar-color: magenta #000000;
	scrollbar-gutter: stable both-edges;
}

body {
	min-height: 100vh;
	background: #151515;
}

main{
	min-height: 100vh;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: space-around; 
}

.defs {
	position: absolute;
	width: 0;
	height: 0;
	pointer-events: none;
}

.text-stack,
.text-input{
	font-family: "Comic Sans MS", "Comic Sans", "Comic Neue", system-ui, sans-serif;
	font-weight: 400;
	font-size: 8rem;
	letter-spacing: 0.15em;
	text-transform: uppercase;
}


.text-stack {
	--label: "";

	position: relative;
	display: inline-block;
	filter: hue-rotate(0deg);
	animation: hue-cycle 2s linear infinite;

	shape-rendering: geometricPrecision;
}

.text-layer {
	position: relative;
	max-width: 100%;
	color: yellow;
	filter: url(#warp-middle);
	animation: 
		wiggle-b 3s steps(30) infinite, 
		color-cycle 6s linear infinite reverse;
}

.text-layer::before,
.text-layer::after,
.text-stack::after {
	content: var(--label, "");
	position: absolute;
	top: 0;
	left: 0;
}

.text-layer::before {
	color: white;
	-webkit-text-stroke: 1px white;
	text-stroke: 1px white;

	filter: url(#outline-warp);
	transform: translate(var(--tx-a, 0px), var(--ty-a, 0px));
	animation: wiggle-a 3s steps(30) infinite;
}

.text-layer::after {
	color: red;
	transform: translate(var(--tx-b, 0px), var(--ty-b, 0px));
	animation: wiggle-b 3s steps(30) infinite, color-cycle 3s linear infinite;
}

.text-stack::after {
	color: cyan;
	-webkit-text-stroke: 0.03em white;
	text-stroke: 0.03em white;

	mix-blend-mode: exclusion;
	opacity: 0.75;

	filter: url(#warp-top);
	transform: translate(var(--tx-top, 0px), var(--ty-top, 0px));
	animation: wiggle-top-group 5s steps(48, end) infinite;
}

/* === For Text Input === */

.editable-stack {
	position: relative;
	display: inline-block;
	text-align: center;
	max-width: 80vw;
	min-width: 50%;
}

.text-input {
	position: absolute;
	inset: 0;
	width: 100%;
	height: 100%;

	border: none;
	outline: none;
	background: transparent;
	text-shadow: none;

	color: transparent;
	caret-color: #ffffff;

	resize: none;
	overflow: hidden;    

	animation: caret-cycle 10s linear infinite;
	filter: url(#warp-middle);
}


.text-layer,
.text-layer::before,
.text-layer::after,
.text-stack::after,
.text-input {
	white-space: pre-wrap;
	overflow-wrap: anywhere;
	text-align: center;
}


.text-input::selection {
	background: rgb(0, 255, 255, 0.3);
	color: black;
}

.text-stack,
.text-layer,
.text-stack::after,
.text-layer::before,
.text-layer::after {
	pointer-events: none;
	user-select: none;
}


/* === Animations === */


@keyframes wiggle-a {
	0%   { --tx-a: 0px;    --ty-a: 0px;    }
	9%   { --tx-a: 1.6px;  --ty-a: -1.9px; }
	21%  { --tx-a: -2.3px; --ty-a: 1.5px;  }
	33%  { --tx-a: 2.6px;  --ty-a: -2.2px; }
	46%  { --tx-a: -1.9px; --ty-a: 2.1px;  }
	59%  { --tx-a: 1.1px;  --ty-a: -1.6px; }
	73%  { --tx-a: -1.4px; --ty-a: 1.9px;  }
	86%  { --tx-a: 2.1px;  --ty-a: -1.4px; }
	100% { --tx-a: 0px;    --ty-a: 0px;    }
}

@keyframes wiggle-b {
	0%   { --tx-b: 0px;    --ty-b: 0px;    }
	7%   { --tx-b: -2.4px; --ty-b: 1.9px;  }
	16%  { --tx-b: 3.0px;  --ty-b: -2.6px; }
	27%  { --tx-b: -2.1px; --ty-b: 2.8px;  }
	39%  { --tx-b: 1.7px;  --ty-b: -3.1px; }
	52%  { --tx-b: -3.2px; --ty-b: 1.6px;  }
	66%  { --tx-b: 2.8px;  --ty-b: -2.0px; }
	81%  { --tx-b: -1.9px; --ty-b: 2.3px;  }
	100% { --tx-b: 0px;    --ty-b: 0px;    }
}

@keyframes wiggle-top-group {
	0%   { --tx-top: 0px;    --ty-top: 0px;    }
	6%   { --tx-top: 5px;    --ty-top: -6px;   }
	13%  { --tx-top: -6px;   --ty-top: 4px;    }
	21%  { --tx-top: 7px;    --ty-top: 3px;    }
	30%  { --tx-top: -5px;   --ty-top: -5px;   }
	40%  { --tx-top: 6px;    --ty-top: 7px;    }
	50%  { --tx-top: -8px;   --ty-top: 2px;    }
	60%  { --tx-top: 4px;    --ty-top: -7px;   }
	70%  { --tx-top: -7px;   --ty-top: 6px;    }
	80%  { --tx-top: 8px;    --ty-top: -3px;   }
	90%  { --tx-top: -6px;   --ty-top: -6px;   }
	100% { --tx-top: 0px;    --ty-top: 0px;    }
}

@keyframes hue-cycle {
	0%   { filter: hue-rotate(0deg); }
	100% { filter: hue-rotate(360deg); }
}

@keyframes color-cycle {
	0%   { color: red;    }
	25%  { color: yellow; }
	50%  { color: lime;   }
	75%  { color: cyan;   }
	100% { color: red;    }
}

@keyframes caret-cycle {
	0%   { caret-color: red;    }
	25%  { caret-color: yellow; }
	50%  { caret-color: lime  }
	75%  { caret-color: blue;   }
	100% { caret-color: red;    }
}



@media (min-width: 100rem) {
	.text-stack,
	.text-input {
		font-size: 10rem;
	}
}

@media (max-width: 50rem) {
	.text-stack,
	.text-input {
		font-size: 5.5rem;
	}
	.editable-stack {
		max-width: 90vw;
	}

	.text-stack::after {
		-webkit-text-stroke: 0.085em white;
		text-stroke: 0.085em white;
	}

	@keyframes wiggle-a {
		0%   { --tx-a: 0px;     --ty-a: 0px; }
		9%   { --tx-a: 1.0px;   --ty-a: -1.2px; }
		21%  { --tx-a: -1.4px;  --ty-a: 0.9px; }
		33%  { --tx-a: 1.6px;   --ty-a: -1.3px; }
		46%  { --tx-a: -1.2px;  --ty-a: 1.3px; }
		59%  { --tx-a: 0.7px;   --ty-a: -1.0px; }
		73%  { --tx-a: -0.9px;  --ty-a: 1.2px; }
		86%  { --tx-a: 1.3px;   --ty-a: -0.9px; }
		100% { --tx-a: 0px;     --ty-a: 0px; }
	}


	@keyframes wiggle-b {
		0%   { --tx-b: 0px;     --ty-b: 0px; }
		7%   { --tx-b: -1.5px;  --ty-b: 1.2px; }
		16%  { --tx-b: 1.8px;   --ty-b: -1.6px; }
		27%  { --tx-b: -1.3px;  --ty-b: 1.7px; }
		39%  { --tx-b: 1.0px;   --ty-b: -1.9px; }
		52%  { --tx-b: -2.0px;  --ty-b: 1.0px; }
		66%  { --tx-b: 1.7px;   --ty-b: -1.2px; }
		81%  { --tx-b: -1.2px;  --ty-b: 1.4px; }
		100% { --tx-b: 0px;     --ty-b: 0px; }
	}


	@keyframes wiggle-top-group {
		0%   { --tx-top: 0px;     --ty-top: 0px; }
		6%   { --tx-top: 3px;     --ty-top: -4px; }
		13%  { --tx-top: -4px;    --ty-top: 3px; }
		21%  { --tx-top: 4px;     --ty-top: 2px; }
		30%  { --tx-top: -3px;    --ty-top: -3px; }
		40%  { --tx-top: 4px;     --ty-top: 4px; }
		50%  { --tx-top: -5px;    --ty-top: 1px; }
		60%  { --tx-top: 3px;     --ty-top: -4px; }
		70%  { --tx-top: -4px;    --ty-top: 3px; }
		80%  { --tx-top: 5px;     --ty-top: -2px; }
		90%  { --tx-top: -4px;    --ty-top: -4px; }
		100% { --tx-top: 0px;     --ty-top: 0px; }
	}
}

@media (max-width: 35rem) {
	.text-stack,
	.text-input {
		font-size: 4rem;
	}
	.editable-stack {
		max-width: 95vw;
	}
	.text-layer::before {
		-webkit-text-stroke: 0px white;
		text-stroke: 0px white;
	}

	
	@keyframes wiggle-a {
		0%   { --tx-a: 0px;     --ty-a: 0px; }
		9%   { --tx-a: 0.7px;   --ty-a: -0.8px; }
		21%  { --tx-a: -0.9px;  --ty-a: 0.6px; }
		33%  { --tx-a: 1.0px;   --ty-a: -0.9px; }
		46%  { --tx-a: -0.8px;  --ty-a: 0.9px; }
		59%  { --tx-a: 0.5px;   --ty-a: -0.7px; }
		73%  { --tx-a: -0.6px;  --ty-a: 0.8px; }
		86%  { --tx-a: 0.9px;   --ty-a: -0.6px; }
		100% { --tx-a: 0px;     --ty-a: 0px; }
	}

	@keyframes wiggle-b {
		0%   { --tx-b: 0px;     --ty-b: 0px; }
		7%   { --tx-b: -1.0px;  --ty-b: 0.8px; }
		16%  { --tx-b: 1.2px;   --ty-b: -1.0px; }
		27%  { --tx-b: -0.9px;  --ty-b: 1.1px; }
		39%  { --tx-b: 0.8px;   --ty-b: -1.2px; }
		52%  { --tx-b: -1.3px;  --ty-b: 0.7px; }
		66%  { --tx-b: 1.1px;   --ty-b: -0.8px; }
		81%  { --tx-b: -0.8px;  --ty-b: 1.0px; }
		100% { --tx-b: 0px;     --ty-b: 0px; }
	}

	@keyframes wiggle-top-group {
		0%   { --tx-top: 0px;     --ty-top: 0px; }
		6%   { --tx-top: 2px;     --ty-top: -2.5px; }
		13%  { --tx-top: -2.5px;  --ty-top: 1.8px; }
		21%  { --tx-top: 3px;     --ty-top: 1.5px; }
		30%  { --tx-top: -2px;    --ty-top: -2px; }
		40%  { --tx-top: 3px;     --ty-top: 3px; }
		50%  { --tx-top: -3.5px;  --ty-top: 1px; }
		60%  { --tx-top: 2px;     --ty-top: -3px; }
		70%  { --tx-top: -3px;    --ty-top: 2px; }
		80%  { --tx-top: 3.5px;   --ty-top: -1.5px; }
		90%  { --tx-top: -2.5px;  --ty-top: -2.5px; }
		100% { --tx-top: 0px;     --ty-top: 0px; }
	}
}